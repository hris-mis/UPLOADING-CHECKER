<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Schedule Conflict Checker â€” Fixed</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter&display=swap" rel="stylesheet" />
<!-- Library for Excel file generation -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

<link rel="stylesheet" href="css/style.css">
</head>
<body class="p-4 sm:p-6 lg:p-8">

<div id="warning-banner" class="hidden fixed top-4 left-1/2 transform -translate-x-1/2 bg-yellow-100 text-yellow-800 px-4 py-2 rounded-lg shadow-md transition-opacity opacity-0"></div>
<div id="success-message" class="hidden fixed top-16 left-1/2 transform -translate-x-1/2 bg-green-100 text-green-800 px-4 py-2 rounded-lg shadow-md transition-opacity opacity-0">âœ… File generated successfully!</div>
<div class="max-w-[1400px] mx-auto">
  <header class="mb-10 text-center">
    <div class="flex justify-center space-x-4 mb-8">
      <button id="tab-schedule" class="px-6 py-2 rounded-full font-semibold bg-indigo-600 text-white shadow-md hover:bg-indigo-700 transition">ğŸ—“ï¸ Schedule Checker</button>
      <button id="tab-monitoring" class="px-6 py-2 rounded-full font-semibold bg-gray-200 text-gray-700 hover:bg-indigo-100 transition">ğŸ“Š Monitoring</button>
    </div>
  </header>

  <div id="tab-schedule-content">
    <h1 class="text-3xl font-extrabold text-center mt-4">Schedule Conflict Checker</h1>
    <div class="text-center my-4" id="clearAllContainer"></div>

    <p class="mt-2 text-center text-gray-600 mb-8">Paste, validate, and generate HRIS upload files for Work and Rest Day schedules.</p>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 px-8 py-6">
      <!-- Work -->
      <div>
        <div class="flex items-center justify-between mb-4 gap-4">
          <h3 class="font-semibold text-lg">1. Paste Work Schedule Data</h3>
          <div class="flex items-center gap-3">
            <input id="workBranchName" type="text" placeholder="Branch Name" class="border rounded px-3 py-2" />
            <button id="generateWorkFile" class="bg-indigo-600 text-white px-4 py-2 rounded">Generate</button>
            <button id="clearWorkData" class="bg-gray-100 px-4 py-2 rounded">Clear</button>
          </div>
        </div>
        <textarea id="workScheduleInput" class="w-full h-64 border rounded p-3 mb-4" placeholder="Paste work schedule (Excel copy) here"></textarea>
        <div class="overflow-auto bg-white rounded border">
          <table class="w-full text-sm text-center">
            <thead class="bg-gray-50 text-gray-600 text-xs">
              <tr><th>Name</th><th>Emp No.</th><th>Work Date</th><th>Shift</th><th>Day</th><th>Position</th></tr>
            </thead>
            <tbody id="workTableBody"></tbody>
          </table>
        </div>
      </div>

      <!-- Rest -->
      <div>
        <div class="flex items-center justify-between mb-4 gap-4">
          <h3 class="font-semibold text-lg">2. Paste Rest Day Schedule Data</h3>
          <div class="flex items-center gap-3">
            <input id="restBranchName" type="text" placeholder="Branch Name" class="border rounded px-3 py-2" />
            <button id="generateRestFile" class="bg-indigo-600 text-white px-4 py-2 rounded">Generate</button>
            <button id="clearRestData" class="bg-gray-100 px-4 py-2 rounded">Clear</button>
          </div>
        </div>
        <textarea id="restScheduleInput" class="w-full h-64 border rounded p-3 mb-4" placeholder="Paste rest day schedule (Excel copy) here"></textarea>
        <div class="overflow-auto bg-white rounded border">
          <table class="w-full text-sm text-center">
            <thead class="bg-gray-50 text-gray-600 text-xs">
              <tr><th>Conflict</th><th>Name</th><th>Emp No.</th><th>Rest Date</th><th>Day</th><th>Position</th></tr>
            </thead>
            <tbody id="restTableBody"></tbody>
          </table>
        </div>
        <div id="summary" class="summary-box text-center hidden"></div>
      </div>
    </div>
  </div>

<!-- MONITORING -->
<div id="tab-monitoring-content" class="hidden dashboard-card mt-6 shadow-lg">

  <h2 class="text-2xl text-center mb-6">ğŸ“Š Branch Monitoring Dashboard</h2>

  <!-- âœ… Summary cards -->
  <div id="monitoring-summary" class="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6 text-center">
    <div class="summary-card bg-gradient-to-r from-sky-500 to-cyan-400 text-white p-4 rounded-lg shadow-md">
      <div class="text-sm opacity-90">ğŸ¢ Total Branches</div>
      <div id="totalBranches" class="text-2xl font-bold">0</div>
    </div>
    <div class="summary-card bg-gradient-to-r from-amber-400 to-yellow-300 text-white p-4 rounded-lg shadow-md">
      <div class="text-sm opacity-90">âœ… Checked</div>
      <div id="checkedBranches" class="text-2xl font-bold">0</div>
    </div>
    <div class="summary-card bg-gradient-to-r from-emerald-500 to-green-400 text-white p-4 rounded-lg shadow-md">
      <div class="text-sm opacity-90">â¬†ï¸ Uploaded</div>
      <div id="uploadedBranches" class="text-2xl font-bold">0</div>
    </div>
  </div>

  <!-- ğŸ“Š Progress Bar -->
  <div class="w-full bg-gray-200 rounded-full h-4 mb-6 overflow-hidden">
    <div id="progressBar" class="h-4 bg-gradient-to-r from-red-500 via-yellow-400 to-green-500 rounded-full transition-all duration-700 ease-out w-0"></div>
  </div>
  <p class="text-center mb-4 text-sm text-gray-700">
    Progress: <span id="progressPercent" class="font-semibold">0%</span>
  </p>

  <!-- ğŸ” Search + Filters -->
  <div class="flex flex-col sm:flex-row justify-center items-center gap-3 mb-4">
    <input id="monitorSearch" type="search" placeholder="Search branch..." class="border rounded px-3 py-2 w-64" />
    <label class="flex items-center gap-2 text-sm text-gray-700">
      <input type="checkbox" id="filterUnchecked" /> Show only unchecked
    </label>
    <button id="clearMonitoringBtn" class="bg-red-500 text-white px-4 py-2 rounded">Clear</button>
    <button id="exportMonitoringBtn" class="bg-green-600 text-white px-4 py-2 rounded">Export</button>
  </div>

  <!-- ğŸ“‹ Monitoring Table -->
  <div class="overflow-auto bg-white rounded border max-h-[480px]">
    <table class="w-full text-sm text-center">
      <thead class="bg-gray-100 sticky top-0 z-10">
        <tr>
          <th>Branch</th>
          <th>Checked</th>
          <th>Uploaded</th>
          <th>Uploaded By</th>
          <th>Remarks</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="monitoringBody"></tbody>
    </table>
  </div>

  <!-- â• Floating Add Button -->
  <button id="addBranchBtn"
    class="fixed bottom-8 right-8 bg-indigo-600 hover:bg-indigo-700 text-white text-2xl rounded-full w-14 h-14 shadow-lg flex items-center justify-center transition-transform transform hover:scale-110">
    +
  </button>

</div>

<!-- ================================
 ğŸŒŒ Tech Breeze Animation Layer
 Powered by GSAP + Vanilla JS Particles
================================ -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>

<!-- Particle container -->
<div id="particle-container"></div>

<script>
// ========== ğŸŒŸ Floating Particles ==========
const container = document.getElementById("particle-container");
const numParticles = 40;
const colors = ["#0ea5e9", "#14b8a6", "#67e8f9", "#99f6e4"];

for (let i = 0; i < numParticles; i++) {
  const dot = document.createElement("div");
  dot.classList.add("particle");
  gsap.set(dot, {
    position: "absolute",
    width: gsap.utils.random(2, 5),
    height: gsap.utils.random(2, 5),
    borderRadius: "50%",
    background: gsap.utils.random(colors),
    x: gsap.utils.random(window.innerWidth),
    y: gsap.utils.random(window.innerHeight),
    opacity: gsap.utils.random(0.3, 0.9)
  });
  container.appendChild(dot);

  // floating motion loop
  gsap.to(dot, {
    duration: gsap.utils.random(12, 24),
    x: `+=${gsap.utils.random(-100, 100)}`,
    y: `+=${gsap.utils.random(-80, 80)}`,
    repeat: -1,
    yoyo: true,
    ease: "sine.inOut"
  });
}

// ========== ğŸ­ Header + Card Entrance ==========
gsap.utils.toArray("header, .dashboard-card").forEach((el, i) => {
  gsap.fromTo(el, 
    { opacity: 0, y: 30 },
    { opacity: 1, y: 0, delay: 0.2 + i * 0.1, duration: 0.8, ease: "power3.out" }
  );
});

// ========== ğŸ® Parallax Header Drift ==========
const header = document.querySelector("header");
if (header) {
  document.addEventListener("mousemove", (e) => {
    const x = (e.clientX / window.innerWidth - 0.5) * 30;
    const y = (e.clientY / window.innerHeight - 0.5) * 30;
    gsap.to(header, { duration: 1.5, backgroundPosition: `${50 + x}% ${50 + y}%`, ease: "power2.out" });
  });
}

// ========== ğŸ§Š Particle Layer CSS ==========
const style = document.createElement("style");
style.innerHTML = `
  #particle-container .particle {
    position: absolute;
    will-change: transform, opacity;
    z-index: 0;
    mix-blend-mode: screen;
  }
`;
document.head.appendChild(style);
</script>


<!-- Rejected rows modal -->
<div id="rejectedModal" class="hidden" style="display:none; position:fixed; inset:0; z-index:10000; align-items:center; justify-content:center;">
  <div class="modal-overlay" style="position:absolute; inset:0; background:rgba(0,0,0,0.35);"></div>
  <div style="position:relative; max-width:800px; width:90%; margin:40px auto; background:white; border-radius:8px; padding:16px; box-shadow:0 8px 30px rgba(0,0,0,0.2); z-index:10001;">
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:8px;">
      <h3 style="margin:0;">Rejected Rows</h3>
      <button class="modal-close" style="background:#ef4444;color:#fff;border:none;border-radius:6px;padding:6px 10px;cursor:pointer;">Close</button>
    </div>
    <div class="modal-body" style="max-height:60vh; overflow:auto;"></div>
  </div>
</div>
<script src="js/main.js"></script>
<!-- ğŸ§­ Floating Back to Top Button -->
<button id="backToTopBtn" title="Back to Top">â¬†ï¸</button>

</body>
</html>
